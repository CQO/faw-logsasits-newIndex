/**
 * 初始化OD分析
 * @class
 * @param {Object} CimMap  CimMap Object
 * @param {Object} viewer 初始化地图返回的viewer对象
 * @example
 * 示例1：
 * let cimODAnalysis = new CimODAnalysis(CimMap, viewer);
 */

 function CimODAnalysis(CimMap, viewer) {
  this.CimMap = CimMap;
  this.viewer = viewer;
  this.opts = {
    CIMMAP_STEP: window.CIMMAP_STEP || 1,
    coordinatesData: {},
    nameData: [],
    entity: [],
    width: 2,
    repeat: 2.0,
    lineColor: "rgba(76,81,57,0.8)",
    lightColor: "rgb(255,2,8,1)",
    images:
      "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA5IAAAAeCAYAAABe6yEsAAAACXBIWXMAAAsTAAALEwEAmpwYAAA7r2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxMzggNzkuMTU5ODI0LCAyMDE2LzA5LzE0LTAxOjA5OjAxICAgICAgICAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgICAgICAgICAgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIj4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxNyAoTWFjaW50b3NoKTwveG1wOkNyZWF0b3JUb29sPgogICAgICAgICA8eG1wOkNyZWF0ZURhdGU+MjAxOS0wNC0xMlQyMDoxMzoxNiswODowMDwveG1wOkNyZWF0ZURhdGU+CiAgICAgICAgIDx4bXA6TW9kaWZ5RGF0ZT4yMDIwLTA0LTIzVDE3OjA2OjEyKzA4OjAwPC94bXA6TW9kaWZ5RGF0ZT4KICAgICAgICAgPHhtcDpNZXRhZGF0YURhdGU+MjAyMC0wNC0yM1QxNzowNjoxMiswODowMDwveG1wOk1ldGFkYXRhRGF0ZT4KICAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9wbmc8L2RjOmZvcm1hdD4KICAgICAgICAgPHBob3Rvc2hvcDpDb2xvck1vZGU+MzwvcGhvdG9zaG9wOkNvbG9yTW9kZT4KICAgICAgICAgPHhtcE1NOkluc3RhbmNlSUQ+eG1wLmlpZDozNzYwOGY1My00YTJiLTRlMjctOTY0OS0wYWY2MzY1YzE2MDQ8L3htcE1NOkluc3RhbmNlSUQ+CiAgICAgICAgIDx4bXBNTTpEb2N1bWVudElEPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDoyNTg2YmI2OC1lY2UzLTExN2MtOTQxMi1kZDc0OWIzNGEyOWE8L3htcE1NOkRvY3VtZW50SUQ+CiAgICAgICAgIDx4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+eG1wLmRpZDpmNDYwNjA3Ny0zM2E2LTRlZGQtOGU5ZS05N2ExYmI0NDNhZmI8L3htcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOkhpc3Rvcnk+CiAgICAgICAgICAgIDxyZGY6U2VxPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5jcmVhdGVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6ZjQ2MDYwNzctMzNhNi00ZWRkLThlOWUtOTdhMWJiNDQzYWZiPC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDE5LTA0LTEyVDIwOjEzOjE2KzA4OjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxNyAoTWFjaW50b3NoKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPnNhdmVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6ZDllNWI3ZTMtYmE3YS00YjRkLTg3OTUtM2E5MmJlZGI1ZjE2PC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDE5LTA3LTE1VDE3OjA0OjU4KzA4OjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxNyAoTWFjaW50b3NoKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmNoYW5nZWQ+Lzwvc3RFdnQ6Y2hhbmdlZD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPnNhdmVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6Mzc2MDhmNTMtNGEyYi00ZTI3LTk2NDktMGFmNjM2NWMxNjA0PC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDIwLTA0LTIzVDE3OjA2OjEyKzA4OjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxNyAoTWFjaW50b3NoKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmNoYW5nZWQ+Lzwvc3RFdnQ6Y2hhbmdlZD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgIDwvcmRmOlNlcT4KICAgICAgICAgPC94bXBNTTpIaXN0b3J5PgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8dGlmZjpYUmVzb2x1dGlvbj43MjAwMDAvMTAwMDA8L3RpZmY6WFJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOllSZXNvbHV0aW9uPjcyMDAwMC8xMDAwMDwvdGlmZjpZUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MjwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICAgICAgICAgPGV4aWY6Q29sb3JTcGFjZT42NTUzNTwvZXhpZjpDb2xvclNwYWNlPgogICAgICAgICA8ZXhpZjpQaXhlbFhEaW1lbnNpb24+OTE0PC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxZRGltZW5zaW9uPjMwPC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAg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",
    icon:
      "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAwCAYAAACfbhNRAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkE1RTRCMTc5RDQyQjExRTc4MkRFQ0ExODQ2Q0JCMkEzIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkE1RTRCMTdBRDQyQjExRTc4MkRFQ0ExODQ2Q0JCMkEzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTVFNEIxNzdENDJCMTFFNzgyREVDQTE4NDZDQkIyQTMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTVFNEIxNzhENDJCMTFFNzgyREVDQTE4NDZDQkIyQTMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6AXAWMAAAKVUlEQVR42rxYC3RU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",
  };
}
/**
 * 创建OD线
 * @memberof CimODAnalysis
 * @method create
 * @param {Object} params 方法参数
 * @param {Number} params.width 线条宽度
 * @param {String} params.lineColor 线条颜色
 * @param {String} params.lightColor 流动光线颜色
 * @param {Number} params.repeat 流动光线重复数量
 * @param {Number} params.speed 流动光线速度
 * @param {String} params.icon 图标路径
 * @param {Number} params.scale 图标缩放倍数
 * @param {Number} params.height 图标离地高度
 * @param {Object} params.coordinatesData Ponit经纬度数据PointId:[经度，纬度]
 * @param {Object} params.nameData 根据Point ID划分迁移起点终点位置群组
 * @returns {Object} 返回OD Point ID集合
 * @example
 * 示例1：
 *   cimODAnalysis.create({
 *       scale:0.5,
 *       height:0,
 *       coordinatesData: {
 *           '北京': ["113.73355460", "23.01228546"],
 *           '上海': ["113.57236787", "23.04126926"],
 *           '深圳': ["114.1446937", "22.82875894"],
 *       },
 *       nameData:[{
 *           from:'北京',
 *           to:'上海'
 *       },{
 *           from:'北京',
 *           to:'深圳'
 *       }],
 *   });
 **/
CimODAnalysis.prototype.create = function(params) {
  let self = this;
  let CimMap = this.CimMap;
  let options = Object.assign(
    {
      scale: 1,
      height: 0,
      url: "",
      pointIds: [],
      lineIds: [],
      speed: 2000,
      id: "",
    },
    this.opts,
    params
  );
  let viewer = this.viewer;
  if (!options.nameData) {
    return;
  }
  if (!options.id) {
    options.id = "PolylineTrail";
  }
  let repeatNum = new Number(options.repeat).toFixed(1);
  function OdLineMaterialProperty(color, duration) {
    this._definitionChanged = new CimMap.Event();
    this._color = undefined;
    this._colorSubscription = undefined;
    this.color = color;
    this.duration = duration;
    this._time = new Date().getTime();
  }

  Object.defineProperties(OdLineMaterialProperty.prototype, {
    isConstant: {
      get: function() {
        return false;
      },
    },
    definitionChanged: {
      get: function() {
        return this._definitionChanged;
      },
    },
    color: CimMap.createPropertyDescriptor("color"),
  });

  OdLineMaterialProperty.prototype.getType = function(time) {
    return "odLine_" + options.id;
  };

  OdLineMaterialProperty.prototype.getValue = function(time, result) {
    if (!CimMap.defined(result)) {
      result = {};
    }
    result.color = CimMap.Property.getValueOrClonedDefault(
      this._color,
      time,
      CimMap.Color.BLUE,
      result.color
    );
    result.image = CimMap.Material.odLineImage;
    result.time =
      ((new Date().getTime() - this._time) % this.duration) / this.duration;
    return result;
  };

  OdLineMaterialProperty.prototype.equals = function(other) {
    return (
      this === other ||
      (other instanceof OdLineMaterialProperty &&
        CimMap.Property.equals(this._color, other._color))
    );
  };
  CimMap.OdLineMaterialProperty = OdLineMaterialProperty;
  CimMap.Material.odLineType = "odLine_" + options.id;
  CimMap.Material.odLineImage = this.opts.images;
  CimMap.Material.odLineSource =
    "czm_material czm_getMaterial(czm_materialInput materialInput)\n" +
    "{\n" +
    "czm_material material = czm_getDefaultMaterial(materialInput);\n" +
    "vec2 st = materialInput.st;\n" +
    "vec4 colorImage = texture2D(image, vec2(fract(" +
    repeatNum +
    "*st.s - time), st.t));\n" +
    "material.alpha = colorImage.a * color.a;\n" +
    "material.diffuse = (colorImage.rgb+color.rgb) / 2.0;\n" +
    "return material;" +
    "}\n";
  CimMap.Material._materialCache.addMaterial(
    CimMap.Material.odLineType,
    {
      fabric: {
        type: CimMap.Material.odLineType,
        uniforms: {
          color: new CimMap.Color(1.0, 0.0, 0.0, 0.5),
          image: CimMap.Material.odLineImage,
          time: 0,
        },
        source: CimMap.Material.odLineSource,
      },
      translucent: function(material) {
        return true;
      },
    }
  );

  let startPointMark = true;
  options.nameData.map(function(data) {
    let backgroundLine = null;
    let polylineTrail = null;
    let startPoint = null;
    let endPoint = null;
    let startName = data.from;
    let destinationName = data.to;
    let type = data.type;
    // 用于拟合当前曲线的笛卡尔坐标点数组
    let startPt = CimMap.Cartesian3.fromDegrees(
      Number(options.coordinatesData[startName][0]),
      Number(options.coordinatesData[startName][1]),
      options.extrudedHeight||0
    );
    let endPt = CimMap.Cartesian3.fromDegrees(
      Number(options.coordinatesData[destinationName][0]),
      Number(options.coordinatesData[destinationName][1]),
      options.extrudedHeight||0
    );
    let curLinePointsArr = self.generateCurve(startPt, endPt);
    let lineColor = options.lineColor;
    let lightColor = options.lightColor;
    let polylineTrailParams = {
      // 尾迹线
      name: "PolylineTrail",
      polyline: {
        positions: curLinePointsArr,
        width: options.width*options.CIMMAP_STEP + 1,
        material: new CimMap.OdLineMaterialProperty(
          CimMap.Color.fromAlpha(
            CimMap.Color.fromCssColorString(options.lightColor),
            parseFloat(1)
          ),
          options.speed
        ),
        //clampToGround: true
      },
    };
    polylineTrail = viewer.entities.add(polylineTrailParams);
    options.entity.push(polylineTrail);
    let backgroundLineParams = {
      // 背景线
      id: startName + "_" + destinationName+'_'+type,
      attributes: {
        type: "od-line",
        startName: startName,
        endName: destinationName,
      },
      key: "od",
      type: "line",
      description: "od-line",
      name: "od-line",
      polyline: {
        width: options.width*options.CIMMAP_STEP-1,
        positions: curLinePointsArr,
        material: CimMap.Color.fromCssColorString(lineColor),
      },
    };
    backgroundLine = viewer.entities.add(backgroundLineParams);
    options.entity.push(backgroundLine);
    options.lineIds.push(backgroundLine.id);
    if (startPointMark) {
      let startPointIcon = "";
      if (options.coordinatesData[startName][2]) {
        startPointIcon = options.coordinatesData[startName][2];
      } else {
        startPointIcon = options.icon;
      }
      let startParams = {
        // 起点
        attributes: {
          type: "od-point",
          startName: startName,
          longitude: Number(options.coordinatesData[startName][0]),
          latitude: Number(options.coordinatesData[startName][1]),
          scale: options.scale,
        },
        key: "od",
        type: "point",
        name: startName,
        position: CimMap.Cartesian3.fromDegrees(
          Number(options.coordinatesData[startName][0]),
          Number(options.coordinatesData[startName][1]),
          Number(options.extrudedHeight)
        ),
        point: {
          color: CimMap.Color.fromCssColorString("#d19a30").withAlpha(0.8),
          verticalOrigin: CimMap.VerticalOrigin.BOTTOM, //垂直位置
            pixelSize: 7
        }
        // billboard: {
        //   scale: options.scale*options.CIMMAP_STEP,
        //   image: startPointIcon,
        //   verticalOrigin: CimMap.VerticalOrigin.BOTTOM, //垂直位置
        //   // distanceDisplayCondition: new CimMap.DistanceDisplayCondition(0, 5500)
        // },
      };
      startPoint = viewer.entities.add(startParams);
      options.entity.push(startPoint);
      options.pointIds.push(startPoint.id);
      // startPointMark = false;
    }
    let endPointIcon = "";
    if (options.coordinatesData[destinationName][2]) {
      endPointIcon = options.coordinatesData[destinationName][2];
    } else {
      endPointIcon = options.icon;
    }
    let endParams = {
      // 终点
      attributes: {
        type: "od-point",
        startName: destinationName,
        longitude: Number(options.coordinatesData[destinationName][0]),
        latitude: Number(options.coordinatesData[destinationName][1]),
        scale: options.scale,
      },
      key: "od",
      type: "point",
      name: destinationName,
      position: CimMap.Cartesian3.fromDegrees(
        Number(options.coordinatesData[destinationName][0]),
        Number(options.coordinatesData[destinationName][1]),
        Number(options.extrudedHeight+10000)
      ),
      point: {
          // color: new CimMap.Color(251 / 255, 7 / 255, 0, 0.2),
          color: CimMap.Color.fromCssColorString("#d19a30").withAlpha(0.8),
          verticalOrigin: CimMap.VerticalOrigin.BOTTOM, //垂直位置
          pixelSize: 7
      }
      // billboard: {
      //   scale: options.scale*options.CIMMAP_STEP,
      //   image: endPointIcon,
      //   verticalOrigin: CimMap.VerticalOrigin.BOTTOM, //垂直位置
      //   // distanceDisplayCondition: new CimMap.DistanceDisplayCondition(0, 5500)
      // },
    };
    endPoint = viewer.entities.add(endParams);
    options.entity.push(endPoint);
    options.pointIds.push(endPoint.id);
  });
  return {
    pointIds: options.pointIds,
    lineIds: options.lineIds,
  };
};
CimODAnalysis.prototype.generateCurve = function(startPoint, endPoint) {
  let CimMap = this.CimMap;
  let addPointCartesian = new CimMap.Cartesian3();
  CimMap.Cartesian3.add(startPoint, endPoint, addPointCartesian);
  let midPointCartesian = new CimMap.Cartesian3();
  CimMap.Cartesian3.divideByScalar(addPointCartesian, 2, midPointCartesian);
  let midPointCartographic = CimMap.Cartographic.fromCartesian(
    midPointCartesian
  );
  midPointCartographic.height =
    CimMap.Cartesian3.distance(startPoint, endPoint) * 0.3;
  let midPoint = new CimMap.Cartesian3();
  CimMap.Ellipsoid.WGS84.cartographicToCartesian(
    midPointCartographic,
    midPoint
  );
  let spline = new CimMap.CatmullRomSpline({
    times: [0.0, 0.5, 1.0],
    points: [startPoint, midPoint, endPoint],
  });
  let curvePointsArr = [];
  for (let i = 0, len = 3000; i < len; i++) {
    curvePointsArr.push(spline.evaluate(i / len));
  }
  curvePointsArr.push(endPoint);
  return curvePointsArr;
};
/**
 * 删除已经添加的OD线
 * @memberof CimODAnalysis
 * @method remove
 * @example
 * 示例1：
 * cimODAnalysis.remove()
 **/
CimODAnalysis.prototype.remove = function() {
  let self = this;
  this.opts.entity.map(function(entity) {
    self.viewer.entities.removeById(entity.id);
  });
};
